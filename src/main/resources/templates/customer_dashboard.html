<!-- HTML5 ドキュメント宣言 -->
<!DOCTYPE html>
<!-- ルート要素：日本語、Thymeleaf と Spring Security の名前空間を宣言 -->
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!-- メタ情報とスタイル読み込み -->
<head>
<!-- 文字コードを UTF-8 に指定 -->
<meta charset="UTF-8">
<!-- ページタイトル -->
<title>顧客ダッシュボード - 予約管理システム</title>
<!-- 共通スタイルシートを読み込む -->
<link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<!-- 画面本体 -->
<body>
<!-- レイアウト用コンテナ -->
<div class="container">
<!-- 見出し -->
<h1>ヘアサロン happy-hair</h1>
<!-- ログインユーザの表示名を出す（Security の principal.name） -->
<p>ようこそ、<span sec:authentication="name"></span>さん！。日常を彩る、あなただけの特別を提供します！</p>
<!-- メインナビ（予約登録／履歴／ログアウト） -->
<div class="main-nav">
<!-- 予約登録ページへ -->
<a th:href="@{/reservation/new}" class="button">予約登録</a>
<!-- 自身の予約履歴へ -->
<a th:href="@{/reservation/history}" class="button">予約履歴</a>
<!-- ログアウトフォーム（POST）。CSRF トークン hidden を入れるのが安全 -->
<!-- クーポン一覧へのリンクボタン -->
<div style="margin-bottom: 20px;">
    <a th:href="@{/coupons}" class="btn-coupon" style="
        display: inline-block;
        padding: 10px 20px;
        background-color: #ff9800;
        color: white;
        text-decoration: none;
        border-radius: 5px;
        font-weight: bold;
    ">
        🎟️ マイクーポンを確認する
    </a>
</div>
<form th:action="@{/logout}" method="post" style="display:inline;">
<!-- 送信ボタン -->
<button type="submit" class="button secondary">ログアウト</button>
<!-- 実運用では CSRF hidden を付与：
<input type="hidden" th:name=
"${_csrf.parameterName}" th:value=
"${_
csrf.token}">
-->
</form>
</div>
<!-- 直近予約の簡易一覧（DashboardController では履歴一覧を model に投入） -->
<h2>あなたの予約</h2>
<!-- 表形式で表示 -->
<table>
<!-- ヘッダ -->
<thead>
<tr>
<!-- スタッフ名 -->
<th>スタッフ</th>
<!-- 日付 -->
<th>日付</th>
<!-- 時間 -->
<th>時間</th>
<!-- メニュー -->
<th>メニュー</th>
<!-- ステータス -->
<th>ステータス</th>
</tr>
</thead>
<!-- 本体 -->
<tbody>
<!-- userReservations をループ（予約が無くても tbody は出る） -->
<tr th:each="reservation : ${userReservations}">
<!-- スタッフ名の表示 -->
<td th:text= "${reservation.staff.name}"></td>
<!-- 予約日（ISO 表示。必要なら #temporals で整形） -->
<td th:text= "${reservation.recordDate}"></td>
<!-- 予約時間 -->
<td th:text= "${reservation.timeSlot}"></td>
<!-- メニュー名 -->
<td th:text= "${reservation.menu}"></td>
<!-- ステータス -->
<td th:text= "${reservation.status}"></td>
</tr>
<!-- データが無い場合の代替行 -->
<tr th:if= "${#lists.isEmpty(userReservations)}">
<!-- 5 列分まとめて表示 -->
<td colspan= "5">予約がありません。</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>